version: '3.5'

services:

  sqlserver:
    container_name: dhl_sqlserver
    volumes:
      - ./storage/sqlserver:/var/opt/mssql
    ports:
      - "1433:1433"
    environment:
      MSSQL_SA_PASSWORD: sqlserver_password

  redis:
    container_name: dhl_redis
    volumes:
      - ./storage/redis:/data
    ports:
      - "6379:6379"

  mongodb:
    container_name: dhl_mongodb
    volumes:
      - ./storage/mongodb:/data/db
    ports:
      - "27017:27017"
    environment:
      MONGO_INITDB_ROOT_USERNAME: mongo_user
      MONGO_INITDB_ROOT_PASSWORD: mongo_password

  redis_commander:
    container_name: dhl_redis_commander
    ports:
      - "8081:8081"
    environment:
      - REDIS_HOSTS=local:dhl_redis:6379

  mongo_express:
    container_name: dhl_mongo_express
    ports:
      - "7071:8081"
    environment:
      ME_CONFIG_MONGODB_ADMINUSERNAME: mongo_user
      ME_CONFIG_MONGODB_ADMINPASSWORD: mongo_password
      ME_CONFIG_MONGODB_URL: mongodb://mongo_user:mongo_password@dhl_mongodb:27017/

  socketi:
    container_name: dhl_soketi
    ports:
      - "6001:6001"
    environment:
      SOKETI_DEFAULT_APP_ID: app-id
      SOKETI_DEFAULT_APP_KEY: app-key
      SOKETI_DEFAULT_APP_SECRET: app-secret
      SOKETI_DEBUG: 1
    profiles:
      - soketi

networks:
  default:
    name: dhl
